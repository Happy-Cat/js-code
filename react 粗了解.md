# react 粗了解
**react是以元素为最小单位，JSX用来声明react的元素，react通过JSX来描述页面，不强制使用，本质是react.createElement 的方法调用，但是JSX可以防止XSS攻击，而且可读性，编写性更高**
**react 元素是不可变的，如果想更新UI只能通过创建一个新的元素，并将其传入reactDom.render()，**
**react 只更新需要更新的位置，reactDom会将元素和子元素与之前状态进行对比，只会进行必要的更新来达到需要的效果**
### Diff算法，
**1.tree diff 只针对同级节点进行比较，如果该节点不存在就直接将当前节点和子节点删除，不在进行比较，如果跨节点移动，就会从新创建删除，儿不是移动，所以官方不推荐跨节点移动dom树**
**2.component diff 如果结构相似就继续进行虚拟dom树的比较，如果结构不相识就直接认为要被替换的组件问脏组件，直接替换该组件下的所有节点，不在进行比较**
**3.element diff 通过节点唯一key进行区分**
**添加：如果在同级中没有找到对应的节点就直接插入**
**更新：如果目标节点在集合中且发生改变，就将旧的节点删除，然后创建新的节点**
**删除：如果目标节点不在集合中就直接删除，**
**移动：将目标节点的位置当当前位置与原来位置进行比较，如果，当前位置大于原来位置就移动并更新当前位置，如果小于就不移动并更新位置**

**因为同级节点比较是根据唯一key，所以建议使用唯一id,而不是数组遍历的index,因为当顺序改变，id值就会变动，可能会导致重绘，而不是移动**

**setState赋值。在内置方法中不会对state进行立刻更新，因为state的改变会导致组件的从新渲染，那么每次setState都会从新渲染组件，是对性能的很大消耗，setState提供了回调方法，可以在回调方法里面进行对state更新的获取**